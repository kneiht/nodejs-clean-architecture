<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sample Clean Architecture App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --scroll-track: #0f172a; /* slate-900 */
        --scroll-thumb: #334155; /* slate-700 */
        --scroll-thumb-hover: #475569; /* slate-600 */
        --scroll-corner: #0b1228; /* near code bg */
      }
      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: var(--scroll-thumb) var(--scroll-track);
      }
      /* WebKit */
      *::-webkit-scrollbar {
        width: 12px;
        height: 12px;
      }
      *::-webkit-scrollbar-track {
        background: var(--scroll-track);
        border-radius: 9999px;
      }
      *::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, rgba(51, 65, 85, 0.95), rgba(30, 41, 59, 0.95));
        border: 2px solid var(--scroll-track);
        border-radius: 9999px;
      }
      *::-webkit-scrollbar-thumb:hover {
        background: var(--scroll-thumb-hover);
      }
      *::-webkit-scrollbar-corner {
        background: var(--scroll-corner);
      }
    </style>
  </head>
  <body class="min-h-screen bg-slate-950 text-slate-100">
    <div class="max-w-6xl mx-auto p-6">
      <!-- Header -->
      <header class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
        <div class="flex items-center gap-3">
          <h1 class="text-xl font-semibold tracking-tight">Test APIs</h1>
        </div>
        <div class="grid gap-3 md:grid-cols-[1fr_1fr_auto] w-full md:w-[640px] items-end">
          <label class="text-xs text-slate-400">
            <span class="block mb-1">Base URL</span>
            <input
              id="api-url"
              value="http://localhost:3000"
              class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
            />
          </label>
          <label class="text-xs text-slate-400">
            <span class="block mb-1">Access Token</span>
            <input
              id="access-token"
              placeholder="Login to obtain token"
              class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
            />
          </label>
          <button
            id="apply-url"
            class="h-9 md:mt-0 inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 text-sm font-medium hover:bg-indigo-500"
          >
            Apply
          </button>
        </div>
      </header>

      <!-- Tabs -->
      <div class="mt-6 flex flex-wrap gap-2">
        <button
          class="tab-btn data-[active=true]:bg-indigo-600 data-[active=true]:text-white bg-slate-900/60 border border-slate-800 px-3 py-1.5 rounded-md text-sm"
          data-tab="auth"
          data-active="true"
        >
          Auth
        </button>
        <button
          class="tab-btn data-[active=true]:bg-indigo-600 data-[active=true]:text-white bg-slate-900/60 border border-slate-800 px-3 py-1.5 rounded-md text-sm"
          data-tab="users"
        >
          Users
        </button>
        <button
          class="tab-btn data-[active=true]:bg-indigo-600 data-[active=true]:text-white bg-slate-900/60 border border-slate-800 px-3 py-1.5 rounded-md text-sm"
          data-tab="posts"
        >
          Posts
        </button>
      </div>

      <!-- Auth Tab -->
      <section id="tab-auth" class="mt-4 grid gap-4 md:grid-cols-2">
        <div class="grid gap-4">
          <!-- Register -->
          <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
            <h3 class="font-medium mb-3">Register</h3>
            <div class="grid gap-3">
              <div class="grid md:grid-cols-2 gap-3">
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">Email</span>
                  <input
                    id="r-email"
                    type="email"
                    placeholder="user@example.com"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">Name</span>
                  <input
                    id="r-name"
                    placeholder="Jane Doe"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
              </div>
              <div class="grid md:grid-cols-[1fr_auto] gap-3 items-end">
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">Password</span>
                  <input
                    id="r-pass"
                    type="password"
                    placeholder="******"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
                <button
                  id="btn-register"
                  class="inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium hover:bg-indigo-500"
                >
                  Register
                </button>
              </div>
              <p class="text-xs text-slate-400">POST /auth/register { email, name, password }</p>
            </div>
          </div>

          <!-- Login -->
          <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
            <h3 class="font-medium mb-3">Login</h3>
            <div class="grid gap-3">
              <div class="grid md:grid-cols-2 gap-3">
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">Email</span>
                  <input
                    id="l-email"
                    type="email"
                    placeholder="user@example.com"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">Password</span>
                  <input
                    id="l-pass"
                    type="password"
                    placeholder="******"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
              </div>
              <div class="flex flex-wrap gap-2 items-center">
                <button
                  id="btn-login"
                  class="inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium hover:bg-indigo-500"
                >
                  Login
                </button>
                <button
                  id="btn-verify"
                  class="inline-flex items-center justify-center rounded-md bg-slate-800 px-3 py-2 text-sm font-medium hover:bg-slate-700"
                >
                  Verify Token
                </button>
                <span class="text-xs text-slate-400"
                  >Status:
                  <span
                    id="auth-pill"
                    class="inline-flex items-center rounded-full border px-2 py-0.5 text-xs border-slate-700 text-slate-300"
                    >unknown</span
                  ></span
                >
              </div>
              <p class="text-xs text-slate-400">
                POST /auth/login { email, password } â€¢ Token verify calls GET /users
              </p>
            </div>
          </div>
        </div>
        <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
          <h3 class="font-medium mb-3">Result</h3>
          <pre
            id="auth-out"
            class="bg-slate-950/70 border border-slate-800 rounded-lg p-3 text-[12px] whitespace-pre-wrap max-h-72 overflow-auto"
          ></pre>
        </div>
      </section>

      <!-- Users Tab -->
      <section id="tab-users" class="mt-4 grid gap-4 md:grid-cols-2 hidden">
        <div class="grid gap-4">
          <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
            <h3 class="font-medium mb-3">All Users</h3>
            <button
              id="btn-users"
              class="inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium hover:bg-indigo-500"
            >
              Fetch Users
            </button>
            <p class="mt-2 text-xs text-slate-400">GET /users (requires Authorization)</p>
          </div>

          <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
            <h3 class="font-medium mb-3">Create User</h3>
            <div class="grid gap-3">
              <div class="grid md:grid-cols-2 gap-3">
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">Email</span>
                  <input
                    id="cu-email"
                    type="email"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">Name</span>
                  <input
                    id="cu-name"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
              </div>
              <div class="grid md:grid-cols-[1fr_auto] gap-3 items-end">
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">Password</span>
                  <input
                    id="cu-pass"
                    type="password"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
                <button
                  id="btn-user-create"
                  class="inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium hover:bg-indigo-500"
                >
                  Create
                </button>
              </div>
              <p class="text-xs text-slate-400">POST /users { email, name, password }</p>
            </div>
          </div>

          <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
            <h3 class="font-medium mb-3">By ID</h3>
            <div class="grid gap-3">
              <label class="text-xs text-slate-400">
                <span class="block mb-1">User ID</span>
                <input
                  id="u-id"
                  placeholder="id"
                  class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                />
              </label>
              <div class="flex flex-wrap gap-2">
                <button
                  id="btn-user-get"
                  class="inline-flex items-center justify-center rounded-md bg-slate-800 px-3 py-2 text-sm font-medium hover:bg-slate-700"
                >
                  GET
                </button>
                <button
                  id="btn-user-update"
                  class="inline-flex items-center justify-center rounded-md bg-slate-800 px-3 py-2 text-sm font-medium hover:bg-slate-700"
                >
                  PUT
                </button>
                <button
                  id="btn-user-del"
                  class="inline-flex items-center justify-center rounded-md bg-rose-600 px-3 py-2 text-sm font-medium hover:bg-rose-500"
                >
                  DELETE
                </button>
              </div>
              <div class="grid md:grid-cols-2 gap-3">
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">New Name</span>
                  <input
                    id="uu-name"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">New Email</span>
                  <input
                    id="uu-email"
                    type="email"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
          <h3 class="font-medium mb-3">Result</h3>
          <pre
            id="user-out"
            class="bg-slate-950/70 border border-slate-800 rounded-lg p-3 text-[12px] whitespace-pre-wrap max-h-72 overflow-auto"
          ></pre>
        </div>
      </section>

      <!-- Posts Tab -->
      <section id="tab-posts" class="mt-4 grid gap-4 md:grid-cols-2 hidden">
        <div class="grid gap-4">
          <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
            <h3 class="font-medium mb-3">All Posts</h3>
            <button
              id="btn-posts"
              class="inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium hover:bg-indigo-500"
            >
              Fetch Posts
            </button>
            <p class="mt-2 text-xs text-slate-400">GET /posts (requires Authorization)</p>
          </div>

          <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
            <h3 class="font-medium mb-3">Create Post</h3>
            <div class="grid gap-3">
              <label class="text-xs text-slate-400">
                <span class="block mb-1">Title</span>
                <input
                  id="cp-title"
                  class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                />
              </label>
              <label class="text-xs text-slate-400">
                <span class="block mb-1">Content</span>
                <textarea
                  id="cp-content"
                  class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                ></textarea>
              </label>
              <div class="grid md:grid-cols-[1fr_auto] gap-3 items-end">
                <label class="text-xs text-slate-400">
                  <span class="block mb-1">User ID</span>
                  <input
                    id="cp-user-id"
                    class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                  />
                </label>
                <button
                  id="btn-post-create"
                  class="inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium hover:bg-indigo-500"
                >
                  Create
                </button>
              </div>
              <p class="text-xs text-slate-400">
                POST /posts { title, content, userId } (requires Authorization)
              </p>
            </div>
          </div>

          <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
            <h3 class="font-medium mb-3">By ID</h3>
            <div class="grid gap-3">
              <label class="text-xs text-slate-400">
                <span class="block mb-1">Post ID</span>
                <input
                  id="p-id"
                  placeholder="id"
                  class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                />
              </label>
              <div class="flex flex-wrap gap-2">
                <button
                  id="btn-post-get"
                  class="inline-flex items-center justify-center rounded-md bg-slate-800 px-3 py-2 text-sm font-medium hover:bg-slate-700"
                >
                  GET
                </button>
                <button
                  id="btn-post-update"
                  class="inline-flex items-center justify-center rounded-md bg-slate-800 px-3 py-2 text-sm font-medium hover:bg-slate-700"
                >
                  PUT
                </button>
                <button
                  id="btn-post-del"
                  class="inline-flex items-center justify-center rounded-md bg-rose-600 px-3 py-2 text-sm font-medium hover:bg-rose-500"
                >
                  DELETE
                </button>
              </div>
              <label class="text-xs text-slate-400">
                <span class="block mb-1">New Title</span>
                <input
                  id="up-title"
                  class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                />
              </label>
              <label class="text-xs text-slate-400">
                <span class="block mb-1">New Content</span>
                <textarea
                  id="up-content"
                  class="w-full rounded-md bg-slate-900/70 border border-slate-800 px-3 py-2 text-sm outline-none focus:border-indigo-500"
                ></textarea>
              </label>
            </div>
          </div>
        </div>
        <div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 shadow">
          <h3 class="font-medium mb-3">Result</h3>
          <pre
            id="post-out"
            class="bg-slate-950/70 border border-slate-800 rounded-lg p-3 text-[12px] whitespace-pre-wrap max-h-72 overflow-auto"
          ></pre>
        </div>
      </section>

      <footer class="mt-8 text-center text-xs text-slate-400">
        This UI is generated by AI for the purpose of testing the APIs only.
      </footer>
    </div>

    <script>
      const $ = (id) => document.getElementById(id);
      const qAll = (sel) => Array.from(document.querySelectorAll(sel));
      let API = $('api-url').value.trim();

      function headers(auth = false) {
        const h = { 'Content-Type': 'application/json' };
        if (auth) {
          const t = $('access-token').value.trim();
          if (t) h['Authorization'] = `Bearer ${t}`;
        }
        return h;
      }
      function setPill(ok) {
        const pill = $('auth-pill');
        pill.textContent = ok === true ? 'ok' : ok === false ? 'invalid' : 'unknown';
        pill.className = `inline-flex items-center rounded-full border px-2 py-0.5 text-xs ${ok === true ? 'border-emerald-500 text-emerald-400' : ok === false ? 'border-rose-500 text-rose-400' : 'border-slate-700 text-slate-300'}`;
      }
      async function call(outEl, method, path, body, auth = false) {
        const url = `${API}${path}`;
        try {
          const res = await fetch(url, {
            method,
            headers: headers(auth),
            body: method === 'GET' || method === 'DELETE' ? undefined : JSON.stringify(body ?? {}),
          });
          const data = await res.json().catch(() => ({ raw: 'Non-JSON response' }));
          if (outEl)
            outEl.textContent = JSON.stringify(
              { status: res.status, ok: res.ok, body: data },
              null,
              2,
            );
          return { res, data };
        } catch (e) {
          if (outEl) outEl.textContent = JSON.stringify({ error: String(e) }, null, 2);
          return null;
        }
      }

      // Tabs
      qAll('.tab-btn').forEach((btn) =>
        btn.addEventListener('click', () => {
          qAll('.tab-btn').forEach((b) => (b.dataset.active = 'false'));
          btn.dataset.active = 'true';
          const tab = btn.dataset.tab;
          qAll('section[id^="tab-"]').forEach((s) => s.classList.add('hidden'));
          document.getElementById(`tab-${tab}`).classList.remove('hidden');
        }),
      );

      // Header controls
      $('apply-url').addEventListener('click', () => {
        API = $('api-url').value.trim().replace(/\/$/, '');
      });

      // Auth actions
      $('btn-register').addEventListener('click', async () => {
        const body = {
          email: $('r-email').value.trim(),
          name: $('r-name').value.trim(),
          password: $('r-pass').value,
        };
        const result = await call($('auth-out'), 'POST', '/auth/register', body);
        if (result?.data?.data?.token?.accessToken) {
          $('access-token').value = result.data.data.token.accessToken;
          setPill(true);
        }
      });
      $('btn-login').addEventListener('click', async () => {
        const body = {
          email: $('l-email').value.trim(),
          password: $('l-pass').value,
        };
        const result = await call($('auth-out'), 'POST', '/auth/login', body);
        if (result?.data?.data?.token?.accessToken) {
          $('access-token').value = result.data.data.token.accessToken;
          setPill(true);
        } else {
          setPill(false);
        }
      });
      $('btn-verify').addEventListener('click', async () => {
        // Use protected route to validate token (works even if /auth/verify is not present)
        const result = await call($('auth-out'), 'GET', '/users', undefined, true);
        setPill(!!result?.res?.ok);
      });

      // Users
      $('btn-users').addEventListener('click', async () => {
        await call($('user-out'), 'GET', '/users', undefined, true);
      });
      $('btn-user-create').addEventListener('click', async () => {
        const body = {
          email: $('cu-email').value.trim(),
          name: $('cu-name').value.trim(),
          password: $('cu-pass').value,
        };
        await call($('user-out'), 'POST', '/users', body);
      });
      $('btn-user-get').addEventListener('click', async () => {
        const id = $('u-id').value.trim();
        if (!id) return alert('Provide user id');
        await call($('user-out'), 'GET', `/users/${id}`);
      });
      $('btn-user-update').addEventListener('click', async () => {
        const id = $('u-id').value.trim();
        if (!id) return alert('Provide user id');
        const body = {};
        const n = $('uu-name').value.trim();
        if (n) body.name = n;
        const e = $('uu-email').value.trim();
        if (e) body.email = e;
        await call($('user-out'), 'PUT', `/users/${id}`, body);
      });
      $('btn-user-del').addEventListener('click', async () => {
        const id = $('u-id').value.trim();
        if (!id) return alert('Provide user id');
        await call($('user-out'), 'DELETE', `/users/${id}`);
      });

      // Posts
      $('btn-posts').addEventListener('click', async () => {
        await call($('post-out'), 'GET', '/posts', undefined, true);
      });
      $('btn-post-create').addEventListener('click', async () => {
        const body = {
          title: $('cp-title').value.trim(),
          content: $('cp-content').value,
          userId: $('cp-user-id').value.trim(),
        };
        await call($('post-out'), 'POST', '/posts', body, true);
      });
      $('btn-post-get').addEventListener('click', async () => {
        const id = $('p-id').value.trim();
        if (!id) return alert('Provide post id');
        await call($('post-out'), 'GET', `/posts/${id}`, undefined, true);
      });
      $('btn-post-update').addEventListener('click', async () => {
        const id = $('p-id').value.trim();
        if (!id) return alert('Provide post id');
        const body = {};
        const t = $('up-title').value.trim();
        if (t) body.title = t;
        const c = $('up-content').value.trim();
        if (c) body.content = c;
        await call($('post-out'), 'PUT', `/posts/${id}`, body, true);
      });
      $('btn-post-del').addEventListener('click', async () => {
        const id = $('p-id').value.trim();
        if (!id) return alert('Provide post id');
        await call($('post-out'), 'DELETE', `/posts/${id}`, undefined, true);
      });
    </script>
  </body>
</html>
